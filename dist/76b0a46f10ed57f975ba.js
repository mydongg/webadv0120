(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{400:function(t,e,s){},405:function(t,e,s){"use strict";var r=s(400);s.n(r).a},412:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"addwork",on:{submit:function(e){return e.preventDefault(),t.submitDependsOnAction(e)}}},[t._m(0),s("div",{staticClass:"addwork__body"},[s("div",{staticClass:"addwork__left"},[s("div",{staticClass:"selectimage",style:{backgroundImage:"url("+t.renderedPhoto+")"},attrs:{id:"selectimage"},on:{drop:function(e){return e.preventDefault(),t.handleDroppedFile(e)},dragover:function(t){t.preventDefault()}}},[t.renderedPhoto?s("div",{staticClass:"selectimage__content"},[s("div",{staticClass:"selectimage__text selectimage__text--white"},[t._v("Перетащите или загрузите для изменения изображения")]),s("div",{staticClass:"selectimage__button"},[s("input",{staticClass:"submit--hidden",attrs:{type:"file",name:"inputWorkPreview",id:"inputWorkPreview"},on:{change:t.handleFile}}),s("label",{staticClass:"submit",attrs:{for:"inputWorkPreview"}},[t._v("Изменить")])])]):s("div",{staticClass:"selectimage__content"},[s("div",{staticClass:"selectimage__text"},[t._v("Перетащите или загрузите для загрузки изображения")]),s("div",{staticClass:"selectimage__button"},[s("input",{staticClass:"submit--hidden",attrs:{type:"file",name:"inputWorkPreview",id:"inputWorkPreview"},on:{change:t.handleFile}}),t._m(1),s("label",{staticClass:"submit",attrs:{for:"inputWorkPreview"}},[t._v("Загрузить")])])])])]),s("div",{staticClass:"addwork__right"},[s("div",{staticClass:"addwork__field"},[s("label",{staticClass:"addwork__fieldtitle"},[t._v("Название")]),s("div",{staticClass:"addwork__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.work.title,expression:"work.title"}],staticClass:"inputtext",attrs:{type:"text"},domProps:{value:t.work.title},on:{click:t.releaseError,input:function(e){e.target.composing||t.$set(t.work,"title",e.target.value)}}}),t._m(2)])]),s("div",{staticClass:"addwork__field"},[s("label",{staticClass:"addwork__fieldtitle"},[t._v("Ссылка")]),s("div",{staticClass:"addwork__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.work.link,expression:"work.link"}],staticClass:"inputtext",attrs:{type:"text"},domProps:{value:t.work.link},on:{click:t.releaseError,input:function(e){e.target.composing||t.$set(t.work,"link",e.target.value)}}}),t._m(3)])]),s("div",{staticClass:"addwork__field"},[s("label",{staticClass:"addwork__fieldtitle"},[t._v("Описание")]),s("div",{staticClass:"addwork__textarea"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work.description,expression:"work.description"}],staticClass:"inputfield",attrs:{type:"text"},domProps:{value:t.work.description},on:{click:t.releaseError,input:function(e){e.target.composing||t.$set(t.work,"description",e.target.value)}}}),t._m(4)])]),s("div",{staticClass:"addwork__field"},[s("label",{staticClass:"addwork__fieldtitle"},[t._v("Добавление тега")]),s("div",{staticClass:"addwork__input"},[s("input",{staticClass:"inputtext",attrs:{type:"text"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addTech(e))},click:t.releaseError}}),t._m(5)])]),s("div",{staticClass:"addwork__tags"},t._l(t.work.techs,function(e){return s("div",{staticClass:"tag"},[s("div",{staticClass:"tag__name"},[t._v(t._s(e))]),s("a",{staticClass:"tag__delete",on:{click:function(s){return t.removeTech(e)}}},[s("svg",{staticClass:"tag__svg",attrs:{preserveAspectRatio:"none"}},[s("use",{attrs:{"xlink:href":"sprite.svg#remove"}})])])])}),0),s("div",{staticClass:"addwork__control"},[s("div",{staticClass:"addwork__reset"},[s("button",{staticClass:"reset",on:{click:function(e){return e.preventDefault(),t.setAction("")}}},[t._v("Отмена")])]),t._m(6)])])])])};r._withStripped=!0;var i=s(30);function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},r=Object.keys(Object(s));"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),r.forEach(function(e){o(t,e,s[e])})}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var n={data:function(){return{renderedPhoto:"",work:{title:"",techs:[],photo:{},link:"",description:""}}},computed:a({},Object(i.c)("works",{worksAction:function(t){return t.worksAction},worksItemToUpdate:function(t){return t.worksItemToUpdate}})),methods:a({},Object(i.b)("works",["addWork","setAction","updateWork"]),Object(i.b)("errors",["setError"]),{handleFile:function(t){var e=t.target.files[0];e.size>1536e3?this.setError("Изображение слишком большого размера"):(this.work.photo=e,this.renderImageFile(e))},handleDroppedFile:function(t){var e=t.dataTransfer.files[0];e.size>1536e3?this.setError("Изображение слишком большого размера"):(this.work.photo=e,this.renderImageFile(e))},renderImageFile:function(t){var e=this,s=new FileReader;try{s.readAsDataURL(t),s.onloadend=function(){e.renderedPhoto=s.result}}catch(t){}},addTech:function(t){if(t.target.value){t.target.classList.remove("input--error");var e=t.target.value.trim();t.target.value="",this.work.techs.push(e)}else t.target.classList.add("input--error")},releaseError:function(t){t.target.classList.remove("input--error")},removeTech:function(t){var e=t.trim();this.work.techs=this.work.techs.filter(function(t){return t!=e})},submitDependsOnAction:function(t){if(this.work.title&&this.work.techs&&this.work.photo&&this.work.link&&this.work.description)"add"===this.worksAction?this.addWork(this.work):this.updateWork(this.work),this.setAction("");else for(var e=t.target.elements,s=0;s<e.length;s++){var r=e[s];r.classList.remove("input--error"),"INPUT"!=r.tagName&&"TEXTAREA"!=r.tagName||r.value||r.classList.add("input--error"),"file"==r.type&&this.renderedPhoto&&r.classList.remove("input--error")}}}),mounted:function(){"update"==this.worksAction&&(this.work=this.worksItemToUpdate,this.renderedPhoto="https://webdev-api.loftschool.com/"+this.worksItemToUpdate.photo)}},l=(s(405),s(45)),c=Object(l.a)(n,r,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addwork__header"},[e("div",{staticClass:"addwork__title"},[this._v("Редактирование работы")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input__error"},[e("div",{staticClass:"errorInput"},[this._v("Загрузите изображение")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input__error"},[e("div",{staticClass:"errorInput"},[this._v("Заполните поле ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input__error"},[e("div",{staticClass:"errorInput"},[this._v("Заполните поле ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input__error"},[e("div",{staticClass:"errorInput"},[this._v("Заполните поле ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input__error"},[e("div",{staticClass:"errorInput"},[this._v("Добавьте теги")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addwork__submit"},[e("button",{staticClass:"submit"},[this._v("Сохранить ")])])}],!1,null,"29ec8286",null);c.options.__file="src/admin/components/worksForm.vue";e.default=c.exports}}]);