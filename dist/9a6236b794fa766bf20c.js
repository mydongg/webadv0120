(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{401:function(e,t,i){},407:function(e,t,i){e.exports=i.p+"c2eb13f7445f7a72d906ee1ebebc0683.png"},408:function(e,t,i){"use strict";var r=i(401);i.n(r).a},414:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"addreview",on:{submit:function(t){return t.preventDefault(),e.submitDependsOnAction(t)}}},[e._m(0),r("div",{staticClass:"addreview__body"},[r("div",{staticClass:"addreview__left"},[r("div",{staticClass:"addreview__avatar"},[r("div",{staticClass:"avatar",style:{backgroundImage:"url("+e.renderedPhoto+")"}},[r("img",{staticClass:"avatar__img",class:{filled:e.renderedPhoto.length},attrs:{src:i(407)}})])]),r("div",{staticClass:"addreview__selectavatar"},[r("input",{staticClass:"reset--hidden",attrs:{name:"inputFileAvatar",id:"inputFileAvatar",type:"file",accept:"image/png, image/jpeg"},on:{change:e.handleFile,click:e.releaseError}}),e._m(1),r("label",{staticClass:"reset reset--download",attrs:{for:"inputFileAvatar"}},[e._v("Добавить фото")])])]),r("div",{staticClass:"addreview__right"},[r("div",{staticClass:"addreview__about"},[r("div",{staticClass:"addreview__field"},[r("div",{staticClass:"addreview__fieldtitle"},[e._v("Имя автора")]),r("div",{staticClass:"addwork__input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.review.author,expression:"review.author"}],staticClass:"inputtext",domProps:{value:e.review.author},on:{click:e.releaseError,input:function(t){t.target.composing||e.$set(e.review,"author",t.target.value)}}}),e._m(2)])]),r("div",{staticClass:"addreview__field"},[r("div",{staticClass:"addreview__fieldtitle"},[e._v("Титул автора")]),r("div",{staticClass:"addwork__input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.review.occ,expression:"review.occ"}],staticClass:"inputtext",domProps:{value:e.review.occ},on:{click:e.releaseError,input:function(t){t.target.composing||e.$set(e.review,"occ",t.target.value)}}}),e._m(3)])])]),r("div",{staticClass:"addreview__text"},[r("div",{staticClass:"addreview__fieldtitle"},[e._v("Отзыв")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.text,expression:"review.text"}],staticClass:"inputfield",domProps:{value:e.review.text},on:{click:e.releaseError,input:function(t){t.target.composing||e.$set(e.review,"text",t.target.value)}}}),e._m(4)]),r("div",{staticClass:"addreview__controls"},[r("div",{staticClass:"addreview__reset"},[r("a",{staticClass:"reset",on:{click:function(t){return e.setAction("")}}},[e._v("Отмена")])]),e._m(5)])])])])};r._withStripped=!0;var s=i(30);function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(Object(i));"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={data:function(){return{renderedPhoto:"",review:{photo:{},author:"",occ:"",text:""}}},computed:a({},Object(s.c)("reviews",{reviewAction:function(e){return e.reviewAction},reviewItemToUpdate:function(e){return e.reviewItemToUpdate}})),methods:a({},Object(s.b)("reviews",["addReview","fetchReviews","updateReview","setAction"]),Object(s.b)("errors",["setError"]),{handleFile:function(e){var t=e.target.files[0];t.size>1536e3?this.setError("Изображение слишком большого размера"):(this.review.photo=t,this.renderImageFile(t))},renderImageFile:function(e){var t=this,i=new FileReader;try{i.readAsDataURL(e),i.onloadend=function(){t.renderedPhoto=i.result}}catch(e){}},submitDependsOnAction:function(e){if(this.review.photo&&this.review.author&&this.review.occ&&this.review.text)"add"===this.reviewAction?this.addReview(this.review):this.updateReview(this.review),this.setAction("");else for(var t=e.target.elements,i=0;i<t.length;i++){var r=t[i];r.classList.remove("input--error"),"INPUT"!=r.tagName&&"TEXTAREA"!=r.tagName||r.value||r.classList.add("input--error"),"file"==r.type&&this.renderedPhoto&&r.classList.remove("input--error")}},releaseError:function(e){e.target.classList.remove("input--error")}}),mounted:function(){"update"===this.reviewAction&&(this.review=this.reviewItemToUpdate,this.renderedPhoto="https://webdev-api.loftschool.com/"+this.reviewItemToUpdate.photo)}},c=(i(408),i(45)),d=Object(c.a)(o,r,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"addreview__header"},[t("div",{staticClass:"addreview__title"},[this._v("Новый отзыв")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input__error"},[t("div",{staticClass:"errorInput"},[this._v("Загрузите изображение")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input__error"},[t("div",{staticClass:"errorInput"},[this._v("Заполните поле")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input__error"},[t("div",{staticClass:"errorInput"},[this._v("Заполните поле")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input__error"},[t("div",{staticClass:"errorInput"},[this._v("Заполните поле")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"addreview__submit"},[t("button",{staticClass:"submit"},[this._v("Сохранить ")])])}],!1,null,"1d5f4a4c",null);d.options.__file="src/admin/components/reviewForm.vue";t.default=d.exports}}]);